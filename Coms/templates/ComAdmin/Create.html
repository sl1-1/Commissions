{% extends "ComAdmin/AdminBase.html" %}
{% load bootstrap3 %}
{% block title %}
    {{ request.resolver_match.namespaces.2 }}: {{ object.name }} {% if object.price %} - ${{ object.price }}{% endif %}
{% endblock %}

{% block breadcrumbs %}
    {{ block.super }} Â» <a href="">{{ object.name }} {% if object.price %} - ${{ object.price }}{% endif %}</a>
{% endblock %}

{% block content %}
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-4 well col-md-offset-4">
                <form method="post" class="form" id="optionform">
                    <div id="dynamic-form">
                    </div>
                    <input type="submit" class="form-control" name="submit"/>
                </form>
            </div>
        </div>
    </div>
    <script type="application/javascript">
        $(document).ready(function () {
            $("#dynamic-form").load('/api/types/1/?format=form')
        });
        $(document).on('submit', '#optionform', function (ev) {
            var data = $( this ).serializeArray();
            $.ajax({
                url: '/api/types/1/?format=form',
                type: 'PUT',
                data: data,
                statusCode: {
                    400: function(rvalue){
                        $('#dynamic-form').html(rvalue.responseText);
                    }
                },
                success: function(rvalue, status){
                    console.log(status)
                }
            });
            ev.preventDefault();
        })
    </script>

{% endblock %}